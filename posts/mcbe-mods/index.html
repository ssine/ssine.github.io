<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="zh-cn"><meta name=author content="Sine"><meta name=description content="微软收购 Minecraft 之后，用 C++ 重写了这款游戏，为之前代码混乱、 bug 频出、 mod 开发困难的 MC 带来了一片光明，并称这个高性能且稳定的版本为基岩版。 基岩版的优劣 基"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="我的世界基岩版 Mod说明"><meta name=twitter:description content="微软收购 Minecraft 之后，用 C++ 重写了这款游戏，为之前代码混乱、 bug 频出、 mod 开发困难的 MC 带来了一片光明，并称这个高性能且稳定的版本为基岩版。 基岩版的优劣 基"><meta property="og:title" content="我的世界基岩版 Mod说明"><meta property="og:description" content="微软收购 Minecraft 之后，用 C++ 重写了这款游戏，为之前代码混乱、 bug 频出、 mod 开发困难的 MC 带来了一片光明，并称这个高性能且稳定的版本为基岩版。 基岩版的优劣 基"><meta property="og:type" content="article"><meta property="og:url" content="https://ssine.ink/posts/mcbe-mods/"><meta property="article:published_time" content="2019-02-25T00:00:00+00:00"><meta property="article:modified_time" content="2019-02-25T00:00:00+00:00"><title>我的世界基岩版 Mod说明 · Sine's Site</title><link rel=canonical href=https://ssine.ink/posts/mcbe-mods/><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=preload href="https://ssine.ink/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://ssine.ink/css/coder.min.a050bb9724f6a498b574acf612d6d523bc68756ddc62579923710a8542947c52.css integrity="sha256-oFC7lyT2pJi1dKz2EtbVI7xodW3cYleZI3EKhUKUfFI=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://ssine.ink/css/coder-dark.min.126ad3988d46bdae6217a11105b53c9662bca05f39d42d3c0fb366919d334620.css integrity="sha256-EmrTmI1Gva5iF6ERBbU8lmK8oF851C08D7NmkZ0zRiA=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://ssine.ink/favicon.ico sizes=32x32><link rel=icon type=image/png href=https://ssine.ink/favicon.ico sizes=16x16><link rel=apple-touch-icon href=https://ssine.ink/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://ssine.ink/images/apple-touch-icon.png><meta name=generator content="Hugo 0.74.1"></head><body class=colorscheme-auto><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://ssine.ink/>Sine's Site</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://ssine.ink/posts/>博客</a></li><li class=navigation-item><a class=navigation-link href=https://kiwi.ssine.cc>维基</a></li><li class=navigation-item><a class=navigation-link href=https://ssine.ink/gallery>画廊</a></li><li class=navigation-item><a class=navigation-link href=https://ssine.ink/projects/>项目</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://ssine.ink/en/posts/mcbe-mods/>English</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>我的世界基岩版 Mod说明</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2019-02-25T00:00:00Z>February 25, 2019</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>阅读时间：3 分钟</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i><a href=https://ssine.ink/categories/%E9%A1%B9%E7%9B%AE/>项目</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i><a href=https://ssine.ink/tags/minecraft/>minecraft</a></div></div></header><div><p>微软收购 Minecraft 之后，用 C++ 重写了这款游戏，为之前代码混乱、 bug 频出、 mod 开发困难的 MC 带来了一片光明，并称这个高性能且稳定的版本为基岩版。</p><h1 id=基岩版的优劣>基岩版的优劣</h1><p>基岩版相对于 Java 版实在是有太多改进， Java 版的缺点详见 <a href=https://www.zhihu.com/question/302736236>我的世界这个游戏的代码能排在游戏代码中排第几？</a> 。 虽然基岩版不开源，但是从使用体验上来说，比 Java 版好很多，微软收购它之后更新速度飞快，从 Wiki 上偏开发的部分也能看出游戏组织比较好，官方还为脚本提供了事件接口（Java 版中并没有明确的事件机制）。</p><p>更令人开心的一点是，官方不再像以前那样对 mod 暧昧不明，而是很开放的支持大家创作自己的插件(Add-on)。 Java 版的 mod 开发全靠反编译游戏、基于社区改造的 API Forge 编码，再编译成 mod ，语言也只能用 Java 。 现在官方提供了脚本引擎，可以直接使用 JavaScript 编写 mod，对于计算需求高的渲染部分有一套高效的 DSL ，语言与性能都堪称完美。 官方的支持也使得插件作者能够方便的盈利，并有统一的平台管理 mod 。</p><p>基岩版尚比不过 Java 版的地方是它还缺少使用它进行开发的社区与 mod 积累，相比于各式各样的 Java 版 mod ，基岩版的插件少得可怜，这也跟官方提供的脚本 API 功能有限有关。 在论坛上可以看到很多人都在期待着基岩版脚本引擎的成熟，如果还不断的有人从编程的角度进入 MC 的世界并欣赏它的魅力，我相信基岩版才是未来的主流。</p><h1 id=项目结构>项目结构</h1><p>所有内容基于 Win10 编写。</p><p>Minecraft 基岩版 (Minecraft Bedrock Edition 简称 MCBE ) 的目录结构与 Java 版的不太一样，存储游戏与信息的根目录位于</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>%userprofile%\AppData\Local\Packages\Microsoft.MinecraftUWP_8wekyb3d8bbwe\LocalState\games\com.mojang
</code></pre></div><p>打开就可以看到行为包、资源包、世界存档等内容，文件夹名字的含义已经很清晰了。</p><h2 id=mcbe-插件管理>MCBE 插件管理</h2><p>MCBE 接管了以前 Java 版中需要启动器来完成的工作： 插件管理。 插件管理的逻辑是，向游戏中下载插件，并在某个世界中使用它。 这一点与启动器的逻辑不同，启动器是直接向某个游戏版本中注入插件，而这会带来很多问题，比如未注入插件的游戏是同一版本，存档却可能不兼容——这也是无奈之举，因为当时只能通过反编译来实现 mod 。</p><p>MCBE 所有导入游戏中的插件都位于根目录下的 <code>behavior_packs</code> 或 <code>resource_packs</code> 中，如果你在创建世界时勾选了要使用插件，那么这些插件会在创建世界时复制一份到这个世界的存档中。 也就是说，插件的版本停留在创建世界时的状态，即使你重新向游戏导入了该插件。 这也为我们带来了方便： 只需要在一个世界存档中修改插件就可以直接看到效果了。</p><h2 id=脚本引擎与行为包>脚本引擎与行为包</h2><p>插件分为两类： 资源包与行为包。 资源包负责像游戏中添加材质、皮肤、音效，行为包负责控制实体的行为。 1.9 版本后新增加的脚本引擎可以执行 Javascript 脚本，这项功能被包括在行为包中。 也就是说，所谓的开发脚本是通过编写行为包的一部分来完成的。</p><p>游戏中的行为包位于根目录下 <code>behavior_packs</code> 文件夹中，里面的每一个文件夹代表一个行为包，里面的 <code>manifest.json</code> 包含了包的信息， <code>pack_icon.png</code> 是行为包的图标，其余的文件夹可根据实际内容创建，但有确定的命名规则。</p><p>我最关注的脚本位于 <code>scripts</code> 文件夹中，里面分为两个文件夹： <code>client</code> 与 <code>server</code> ，分别表示在客户端与服务端运行的代码。一个最小可运行的行为包目录结构如下：</p><pre><code>.
├── manifest.json
├── pack_icon.png
└── scripts
    ├── client
    │   └── sampleClientScript.js
    └── server
        └── sampleServerScript.js
</code></pre><p><code>scripts</code> 文件夹中的服务端脚本总是会运行，要使得客户端脚本也能运行，需要在 <code>manifest.json</code> 中加上类型为 <code>client_data</code> 的 <code>module</code>，如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#f92672>&#34;format_version&#34;</span>: <span style=color:#ae81ff>1</span>,
  <span style=color:#f92672>&#34;header&#34;</span>: {
    <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Hellow world behavior pack&#34;</span>,
    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Hellow World Pack&#34;</span>,
    <span style=color:#f92672>&#34;uuid&#34;</span>: <span style=color:#e6db74>&#34;541b2d4d-aab3-4e44-8da9-1c78e75d9e71&#34;</span>,
    <span style=color:#f92672>&#34;version&#34;</span>: [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]
  },
  <span style=color:#f92672>&#34;modules&#34;</span>: [
    {
      <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Hellow world behavior pack client&#34;</span>,
      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;client_data&#34;</span>,
      <span style=color:#f92672>&#34;uuid&#34;</span>: <span style=color:#e6db74>&#34;8ccc04dd-dba9-4c0f-9a2d-75f4d15a52be&#34;</span>,
      <span style=color:#f92672>&#34;version&#34;</span>: [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]
    }
  ]
}
</code></pre></div><h1 id=api-与文档>API 与文档</h1><p>目前官方提供的事件还很少，脚本想要做出行为也基本上只能通过触发事件。 Wiki 上对于各种数据类型有解释，不过仍在开发中，因此读起来并不通顺，这篇文章也是记下一些 Wiki 中没有提到，我自己摸索出来的开发需要的知识。</p><ul><li><a href=https://minecraft.gamepedia.com/Add-on>插件简介</a></li><li><a href=https://minecraft.gamepedia.com/Bedrock_Edition_beta_scripting_documentation>脚本引擎</a></li><li><a href=https://minecraft.gamepedia.com/Commands>游戏命令</a></li></ul><p>脚本引擎部分有目前支持的事件、数据结构等信息，脚本想要对世界进行修改（放置、摧毁方块、生成实体等）主要通过发出命令。 在游戏命令部分有相应的介绍。</p></div><footer></footer></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};</script></section></div><footer class=footer><section class=container><p>© 2016 - 2023 正弦 | <a href=https://beian.miit.gov.cn/ target=_blank>京ICP备19051756号</a></p></section></footer></main><script src=https://ssine.ink/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-127064931-1','auto');ga('send','pageview');}</script></body></html>