<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="zh-cn"><meta name=author content="Sine"><meta name=description content="最近为了《马里奥制造2》入手了 switch ，通关故事模式后一直在打多人和耐力挑战，突然想做一些音乐图，于是开始研究。 不了解音乐图的朋友可以看一下这个视"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="马里奥制造2 音乐图的制作"><meta name=twitter:description content="最近为了《马里奥制造2》入手了 switch ，通关故事模式后一直在打多人和耐力挑战，突然想做一些音乐图，于是开始研究。 不了解音乐图的朋友可以看一下这个视"><meta property="og:title" content="马里奥制造2 音乐图的制作"><meta property="og:description" content="最近为了《马里奥制造2》入手了 switch ，通关故事模式后一直在打多人和耐力挑战，突然想做一些音乐图，于是开始研究。 不了解音乐图的朋友可以看一下这个视"><meta property="og:type" content="article"><meta property="og:url" content="https://ssine.ink/posts/smm2-music-course/"><meta property="article:published_time" content="2019-10-15T00:00:00+00:00"><meta property="article:modified_time" content="2019-10-15T00:00:00+00:00"><title>马里奥制造2 音乐图的制作 · Sine's Site</title><link rel=canonical href=https://ssine.ink/posts/smm2-music-course/><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=preload href="https://ssine.ink/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://ssine.ink/css/coder.min.a050bb9724f6a498b574acf612d6d523bc68756ddc62579923710a8542947c52.css integrity="sha256-oFC7lyT2pJi1dKz2EtbVI7xodW3cYleZI3EKhUKUfFI=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://ssine.ink/css/coder-dark.min.126ad3988d46bdae6217a11105b53c9662bca05f39d42d3c0fb366919d334620.css integrity="sha256-EmrTmI1Gva5iF6ERBbU8lmK8oF851C08D7NmkZ0zRiA=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://ssine.ink/favicon.ico sizes=32x32><link rel=icon type=image/png href=https://ssine.ink/favicon.ico sizes=16x16><link rel=apple-touch-icon href=https://ssine.ink/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://ssine.ink/images/apple-touch-icon.png><meta name=generator content="Hugo 0.74.1"></head><body class=colorscheme-auto><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://ssine.ink/>Sine's Site</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://ssine.ink/posts/>博客</a></li><li class=navigation-item><a class=navigation-link href=https://kiwi.ssine.cc>维基</a></li><li class=navigation-item><a class=navigation-link href=https://ssine.ink/gallery>画廊</a></li><li class=navigation-item><a class=navigation-link href=https://ssine.ink/projects/>项目</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://ssine.ink/en/posts/smm2-music-course/>English</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>马里奥制造2 音乐图的制作</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2019-10-15T00:00:00Z>October 15, 2019</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>阅读时间：3 分钟</span></div></div></header><div><p>最近为了《马里奥制造2》入手了 switch ，通关故事模式后一直在打多人和耐力挑战，突然想做一些音乐图，于是开始研究。</p><p>不了解音乐图的朋友可以看一下这个视频： <a href=https://www.bilibili.com/video/av65739781>https://www.bilibili.com/video/av65739781</a> （随便找的）。</p><h1 id=音乐图的机制>音乐图的机制</h1><p>首先说明一下音乐图在游戏中的机制，有以下三点：</p><ol><li>系统只会加载屏幕附近的区块</li><li>物体落到音符上会发出声音</li><li>音符放置的高度会影响音调</li></ol><p>推荐一张图，对相关内容进行了展示： XRY-1KH-GPF</p><p><img src=building_block.jpg alt=基本块></p><p>如上图所示，把板栗放到音符上，在音符和板栗被加载时板栗会掉到音符上发出声音，为了防止板栗弹起来掉回去的时候再次发出声音，放置一个云砖块拦住板栗，并在四周放上墙防止板栗走动。</p><p>下面对这三条规则进行详细说明</p><h2 id=区块加载>区块加载</h2><p><img src=block_loading.png alt=区块加载></p><p>如上图所示，在从左向右移动的过程中，系统会加载屏幕右侧前方 4 格内的物体，并移除后方 8 格外的物体。 按照顺序放置音符和上面的物体，在它们被加载出来的时候物体会下落到音符上发出声音，从而组成旋律。</p><h2 id=不同物体的音色>不同物体的音色</h2><p>目前已知的一些音效<sup>[1]</sup>：</p><p><img src=sound_effect.jpg alt=音效></p><h2 id=音符高度与音调>音符高度与音调</h2><p>一张图可以解释清楚音符高度与音调的关系<sup>[1]</sup>：</p><p><img src=tune.png alt=音调></p><p>参考<a href=https://baike.baidu.com/item/%E5%8D%81%E4%BA%8C%E5%B9%B3%E5%9D%87%E5%BE%8B>十二平均律</a>。</p><h1 id=音乐图的组成>音乐图的组成</h1><p>在了解了音乐图的原理之后，我们可以试着制作一个音乐图，音乐图的原材料是乐谱，我们要做的就是在游玩地图的过程中，在<strong>适当的时间</strong>发出乐谱中<strong>对应的音调</strong>。 首先来看如何控制音乐的速度。</p><h2 id=速度>速度</h2><p>音乐的速度与节拍决定了关卡的速度与音符放置间隔。 五线谱中的 𝅘𝅥=100 表示每分钟演奏 100 个四分音符，简谱中也会有类似的标记，把速度换算成每秒的音符数，然后在关卡中选择一个速度合适的前进方式。 经过大量实验，不同前进方式的速度如下：</p><table><thead><tr><th align=center>kind</th><th align=center>speed (unit / s)</th></tr></thead><tbody><tr><td align=center>行走</td><td align=center>5.64</td></tr><tr><td align=center>传送带</td><td align=center>3.75</td></tr><tr><td align=center>普通卷轴</td><td align=center>3.75</td></tr><tr><td align=center>蓝色熔岩台</td><td align=center>9.3</td></tr><tr><td align=center>轨道</td><td align=center>2.81</td></tr></tbody></table><p>跑步速度为行走的 2 倍，慢速卷轴和快速卷轴分别是普通卷轴的 1/2 和 2 倍，传送带同理。</p><p>如何根据音乐节拍来选择移动速度呢？ 这要由乐谱中时长最短的键来决定。 例如乐谱速度是每分钟60个四分音符，使用到的最短音符是八分音符，那么游戏中的间隔就要以八分音符为单位。 每分钟 120 个八分音符，每秒 2 个，如果每个八分音符占两格，需要的速度就是每秒钟 4 格，可以使用普通卷轴 ( 3.75 ) 或是在反向卷轴上跑步 ( 3.78 ) 来近似。</p><h2 id=音调>音调</h2><p>由于横向地图有高度限制，声音的跨度只有两个八度，非常有限。 但是纵向地图是无法做成音乐图的，因为音符的音调还是和放置高度有关，只不过是把两个八度循环来了。 还有一个额外的限制，就是发出一个不干扰的音至少要占用纵向的四格 (音符、云、空、墙)，因此想要组成和弦也很困难。目前还没有很好的解决方案。</p><hr><p><sup>[1]</sup><a href=https://www.3dmgame.com/gl/3784030.html>《超级马里奥制造2》音乐图制作方法</a></p></div><footer></footer></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};</script></section></div><footer class=footer><section class=container><p>© 2016 - 2023 正弦 | <a href=https://beian.miit.gov.cn/ target=_blank>京ICP备19051756号</a></p></section></footer></main><script src=https://ssine.ink/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-127064931-1','auto');ga('send','pageview');}</script></body></html>