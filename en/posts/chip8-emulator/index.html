<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=author content="Sine"><meta name=description content="A project from the design of computer composition principles. Introduction Why do it The experimental class of computer composition principle should write a Virtual Machine in a high-level language. The first step is to hand over the design report. In the past few days, I have been thinking about what kind of VM to do after thinking about it. Software re-engineering the Proteus CPU of the last semester is too"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="CHIP-8 Emulator"><meta name=twitter:description content="A project from the design of computer composition principles. Introduction Why do it The experimental class of computer composition principle should write a Virtual Machine in a high-level language. The first step is to hand over the design report. In the past few days, I have been thinking about what kind of VM to do after thinking about it. Software re-engineering the Proteus CPU of the last semester is too"><meta property="og:title" content="CHIP-8 Emulator"><meta property="og:description" content="A project from the design of computer composition principles. Introduction Why do it The experimental class of computer composition principle should write a Virtual Machine in a high-level language. The first step is to hand over the design report. In the past few days, I have been thinking about what kind of VM to do after thinking about it. Software re-engineering the Proteus CPU of the last semester is too"><meta property="og:type" content="article"><meta property="og:url" content="https://ssine.ink/en/posts/chip8-emulator/"><meta property="article:published_time" content="2018-03-16T00:00:00+00:00"><meta property="article:modified_time" content="2018-03-16T00:00:00+00:00"><title>CHIP-8 Emulator · Sine's Site</title><link rel=canonical href=https://ssine.ink/en/posts/chip8-emulator/><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel=stylesheet><link rel=preload href="https://ssine.ink/fonts/forkawesome-webfont.woff2?v=1.1.7" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://ssine.ink/css/coder.min.a050bb9724f6a498b574acf612d6d523bc68756ddc62579923710a8542947c52.css integrity="sha256-oFC7lyT2pJi1dKz2EtbVI7xodW3cYleZI3EKhUKUfFI=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://ssine.ink/css/coder-dark.min.126ad3988d46bdae6217a11105b53c9662bca05f39d42d3c0fb366919d334620.css integrity="sha256-EmrTmI1Gva5iF6ERBbU8lmK8oF851C08D7NmkZ0zRiA=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://ssine.ink/favicon.ico sizes=32x32><link rel=icon type=image/png href=https://ssine.ink/favicon.ico sizes=16x16><link rel=apple-touch-icon href=https://ssine.ink/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://ssine.ink/images/apple-touch-icon.png><meta name=generator content="Hugo 0.74.1"></head><body class=colorscheme-auto><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://ssine.ink/en>Sine's Site</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://ssine.ink/en/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://kiwi.ssine.cc>Wiki</a></li><li class=navigation-item><a class=navigation-link href=https://ssine.ink/en/gallery>Gallery</a></li><li class=navigation-item><a class=navigation-link href=https://ssine.ink/en/projects/>Projects</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://ssine.ink/posts/chip8-emulator/>中文</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>CHIP-8 Emulator</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i><time datetime=2018-03-16T00:00:00Z>March 16, 2018</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>2-minute read</span></div></div></header><div><p>A project from the design of computer composition principles.</p><h1 id=introduction>Introduction</h1><h2 id=why-do-it>Why do it</h2><p>The experimental class of computer composition principle should write a Virtual Machine in a high-level language. The first step is to hand over the design report. In the past few days, I have been thinking about what kind of VM to do after thinking about it. Software re-engineering the Proteus CPU of the last semester is too cold, and trying to write a Y86 simulation project is too large. When I was in class today, I saw my friend checking the NES simulator. I was inspired to make a game console simulator. It was very interesting, and I was able to run the game with a sense of accomplishment. Originally interested in early games, when the video games just started in the middle of the last century, those games were the originators. After that, the data collection began. According to history, the earliest game was played on the oscilloscope in the lab, followed by the PDP-1 machine, and then the first arcade appeared. However, these machines are not highly focused and have relatively few development documents. After that, the more popular one is the NES game console (Japan&rsquo;s FC). There is also a Gameboy that I am interested in. After deep understanding, I found that the workload to achieve them is a bit large, about a project of more than half a year, and the Final Project used to do one-half is stupid. (The Gameboy series has two upgraded versions of Gameboy Color and Gameboy Advanced. The GBA is directly on the ARM7 instruction set. Although it is very much wanted to do it, it is still too self-sufficient.) I am browsing the NES with fear of huge workload. When I found the information, I found a magical thing - Chip-8.</p><p>This is an interpreted programming language proposed in 1970 that runs on the dedicated <strong>CHIP-8 Virtual Machine</strong> to help people develop games more easily. Developer: Joseph Weisbecker. Of course, the point is that Chip-8 is probably the simplest actual simulation project I can currently implement. So just work on it, let&rsquo;s go.</p><h2 id=related-resources>related resources</h2><p>English tutorial <a href=http://www.multigesture.net/articles/how-to-write-an-emulator-chip-8-interpreter/>How to write an emulator (CHIP-8 interpreter)</a></p><p>Technical Doc <a href=http://devernay.free.fr/hacks/chip8/C8TECH10.HTM>Cowgod’s Chip-8 Technical Reference v1.0</a></p><p>Game ROM collection package <a href=https://www.zophar.net/pdroms/chip8/chip-8-games-pack.html>Chip-8 Games Pack</a></p><p>Github Project <a href=https://github.com/alexanderdickson/Chip-8-Emulator>Chip-8 Emulator</a></p><p>Chinese tutorial <a href=http://blog.csdn.net/korekara88730/article/details/50987930>手把手教你编写游戏模拟器 - Chip8篇(1)</a></p><p>JS Drawing <a href=https://www.paulirish.com/2011/requestanimationframe-for-smart-animating/>requestAnimationFrame for Smart Animating</a></p><p>Instructions for some games <a href=http://www.pong-story.com/chip8/>David Winter&rsquo;s CHIP-8 emulation page</a></p><p>Chip8 to Super Chip8 <a href=http://devernay.free.fr/hacks/chip8/schip.txt>SUPER-CHIP v1.1</a></p><h1 id=machine-overview>Machine overview</h1><p>First, find out more about the Chip-8 VM. The following is organized from <a href=https://en.wikipedia.org/wiki/CHIP-8#Virtual_machine_description>Wikipedia</a>.</p><h2 id=ram>RAM</h2><p>CHIP-8 has 4K ( <code>0x1000</code>) memory, 8 bits long (the origin of chip 8). The CHIP-8 interpreter occupies 512 bytes ( <code>0x200</code>) before memory , and the highest 256 bytes ( <code>0xF00-0xFFF</code>) is reserved for display refresh. The 96 bytes ( <code>0xEA0-0xEFF</code>) below it are reserved for stack, internal use, and other variables.</p><p>In the current implementation, the interpreter does not need to be stored in memory as external code, but font data is typically stored in the lower 512 bytes.</p><h2 id=register>register</h2><p>CHIP-8 has 16 8-bit registers, from <code>V0</code> to <code>VF</code> . <code>VF</code> Registers are used as flags for some instructions and should be avoided. (The carry flag in the addition, there is no borrow sign in the subtraction, the drawing is related to the pixel collision)</p><p>The name of the address register is called <code>I</code>, 16-bit word length and is related to several memory manipulation instructions.</p><h2 id=stack>Stack</h2><p>The stack stores the return address only when the subroutine is called. Today&rsquo;s implementations usually have a minimum of 16 layers.</p><h2 id=timer>Timer</h2><p>CHIP-8 has two timers. They count down at 60 Hz until 0.</p><ul><li>Delay Register: Used to time the event in the game, its value can be set and read.</li><li>Sound Register: For sound effects, if its value is not 0, it beeps.</li></ul><h2 id=input>Input</h2><p>The input device is a 0 to F hex keyboard. Which <code>8462</code> is commonly used directional input. There are three instructions for detecting input. One is to skip an instruction when a particular key is pressed, and the other to skip an instruction when there is no button. The third waits for a keyboard input and saves it in a register.</p><h2 id=graphics-and-sound>Graphics and sound</h2><p>The native CHIP-8 display resolution is 64 x 32 pixels, monochrome. The image is rendered by drawing sprites that are 8 wide and 1 to 15 high. The Sprite pixel is XORed with the pixel on the corresponding position screen, so it is the pixel point at the corresponding position of the reverse screen. When a sprit is drawn, the <code>VF</code> register is set to 1 if there are pixels on the screen from light to dark , otherwise 0. This is used for collision detection.</p><p>The sound part is said in the sound register.</p><h2 id=operation-code-table>Operation code table</h2><p>CHIP-8 has 35 opcodes, all of which are 2 bytes long and are stored in big endian mode. Below is a list with the following flags:</p><ul><li>NNN: address</li><li>NN: 8-bit constant</li><li>N: 4-bit constant</li><li>X and Y: 4-bit register identifier</li><li>PC : Program Counter</li><li>I : 16-bit register for memory addressing</li></ul><p>see <a href=https://en.wikipedia.org/wiki/CHIP-8#Opcode_table>Wikipedia</a> for more details.</p></div><footer></footer></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};</script></section></div><footer class=footer><section class=container><p>© 2016 - 2023 Sine Liu</p></section></footer></main><script src=https://ssine.ink/js/dark-mode.min.0213e1773e6d1c5a644f847c67a6f8abac49a3776e2976f6008038af8c5b76a1.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-127064931-1','auto');ga('send','pageview');}</script></body></html>